!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=document.getElementById("input"),o=document.getElementById("output"),a=document.getElementById("query-form"),i=document.getElementById("query-suggest"),c="query_history",u=20,l=100,f=function(){var t=localStorage.getItem(c);if(t)try{return JSON.parse(t)}catch(t){}return[]}(),d=!1;function s(){if(location.hash){var t=new URLSearchParams(location.hash.substr(1));t.has("q")&&(r.value=t.get("q"),p())}}function p(){v(),o.innerHTML="",r.disabled=!0;var t=Date.now();location.hash="#q="+encodeURIComponent(r.value),document.title="Query: "+r.value,query(r.value).then(function(e){var a,i=(Date.now()-t)/1e3;if(o.innerHTML=function(t){var e=t.rows,n=t.duration,r=e.shift();if(!r)return'<p style="font-weight: bold;">Empty Result Set</p><p>'.concat(n," seconds</p>");return"<table>\n            <thead>\n                <tr>".concat(r.map(function(t){return"<th>".concat(t,"</th>")}).join(""),"</tr>\n            </thead>\n            <tbody>\n                ").concat(e.map(function(t){return"\n                    <tr>".concat(t.map(function(t){return"<td>".concat(function(t){var e=t.cell;if(null===e)return'<span class="null"></span>';if(e=String(e),/^#[0-9a-f]{6}$/i.test(e))return'<div style="background-color: '.concat(e,'; height: 20px; width: 20px; margin: 0 auto;" title="').concat(e,'"></div>');if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/.test(e)){var n=new Date(e);return 0===n.getHours()&&0===n.getMinutes()?n.toLocaleDateString(navigator.language):n.toLocaleString(navigator.language)}return e=(e=e.replace(/https?:\/\/[^,]+/g,function(t){var e=t;return/\.(jpe?g|gif|png|webp)$/i.test(t)&&(e=d?'<object data="'.concat(t,'" height="64"></object>'):'<img src="'.concat(t,'" height="64" />')),'<a href="'.concat(t,'" target="_blank">').concat(e,"</a>")})).replace(/[^@,\s]+@[^@,\s]+\.[^@,\s]+/g,function(t){return'<a href="mailto:'.concat(t,'">').concat(t,"</a>")})}({cell:t}),"</td>")}).join(""),"</tr>\n                ")}).join(""),'\n            </tbody>\n            <tfoot><tr><td colspan="').concat(r.length,'">').concat(e.length," rows, ").concat(n," seconds</td></tr></tfoot>\n        </table>")}({rows:e.slice(),duration:i}),a=r.value,(f=f.filter(function(t){return t!==a})).unshift(r.value),f.length=l,localStorage.setItem(c,JSON.stringify(f)),e.length>=3&&e[0].length>=2&&"number"==typeof e[1][0]&&"number"==typeof e[1][1]){var u=o.querySelector("tfoot td");if(u){var s=document.createElement("button");s.className="link",s.innerHTML="Graph",s.addEventListener("click",function(){u.removeChild(s),o.appendChild(function(t){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=300,e.height=300;t.shift();var o=t.map(function(t){return t[0]}),a=t.map(function(t){return t[1]}),i=Math.min.apply(Math,n(o)),c=Math.max.apply(Math,n(o)),u=Math.min.apply(Math,n(a)),l=Math.max.apply(Math,n(a)),f=e.width/(c-i),d=e.height/(l-u),s=e.height;r.strokeStyle="#999",r.strokeRect(0,0,e.width,e.height),r.beginPath(),r.moveTo((o[0]-i)*f,s-(a[0]-u)*d);for(var p=1;p<t.length;p++)r.lineTo((o[p]-i)*f,s-(a[p]-u)*d);return r.strokeStyle="red",r.stroke(),e}(e.slice()))}),u.appendChild(s)}}}).catch(function(t){o.innerHTML='<p style="color: red; margin: 20px;">'.concat(t,"</p>")}).then(function(){r.disabled=!1})}function h(){return f.filter(function(t){return t&&t!=r.value&&t.startsWith(r.value)}).slice(0,u)}function g(){i.innerHTML=h().map(function(t){return"<li>".concat(t,"</li>")}).join("")}function v(){i.innerHTML=""}a.addEventListener("submit",function(t){t.preventDefault(),p()}),document.addEventListener("keydown",function(t){if("Enter"===t.key)p();else if("Escape"===t.key)v();else if("Tab"===t.key){var e=h();e.length>=1&&(t.preventDefault(),r.value=e[0])}}),document.addEventListener("click",function(t){v()}),r.addEventListener("keyup",function(t){if(t.altKey&&"1234567890".includes(t.key)){t.preventDefault();var e=h()["1234567890".indexOf(t.key)];void 0!==e&&(r.value=e)}else if("Escape"===t.key)return;g()}),i.addEventListener("click",function(t){t.target instanceof HTMLLIElement&&(r.value=t.target.textContent,g(),r.focus())}),window.addEventListener("hashchange",s),s(),r.focus()}]);